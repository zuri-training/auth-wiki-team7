

Title: Migrate to Passwordless Endpoint from Confidential Applications

Ref: https://auth0.com/docs/troubleshoot/product-lifecycle/past-migrations/migrate-to-passwordless#auth0-js-or-lock-js-in-the-universal-login-page

Introduction: Auth0 is deprecating the use of the `/passwordless/start` endpoint from confidential applications when Auth0 cannot authenticate that the call is made on behalf of the application.

Code Samples:

For any calls from your backend to the `/passwordless/start` endpoint, your call must include the client secret as a parameter.


POST https://YOUR_AUTH0_DOMAIN/passwordless/start
    Content-Type: application/json
    {
      "client_id": "YOUR_CLIENT_ID",
      "client_secret": "YOUR_CLIENT_SECRET",
      "connection": "email|sms",
      "email": "EMAIL", //set for connection=email
      "phone_number": "PHONE_NUMBER", //set for connection=sms
      "send": "link|code",
      "authParams": { 
          "scope": "openid",
          "state": "YOUR_STATE"
        }
      }


Auth0.js or Lock.js in the Universal Login page

      #Auth0.js
      var l0ock = new Auth0Lock(config.clientID, config.auth0Domain, {
      auth: {
        // .. other fields set
        params: config.internalOptions
      })

  
      #Lock.js
      var params = Object.assign({
      // .. some fields set
    }, config.internalOptions);
    
    var webAuth = new auth0.WebAuth(params);